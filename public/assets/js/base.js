!function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=n(String(t||"").toLowerCase()),!t||!t.length)return[];var e,o,s,a,l=[],p=t.split(/ +/);for(e=0,o=p.length;o>e;e++){if(s=i(p[e]),this.settings.diacritics)for(a in r)r.hasOwnProperty(a)&&(s=s.replace(new RegExp(a,"g"),r[a]));l.push({string:p[e],regex:new RegExp(s,"i")})}return l},t.prototype.iterator=function(t,e){var o;o=s(t)?Array.prototype.forEach||function(t){for(var e=0,o=this.length;o>e;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},o.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var o,n,i,s;o=this,t=o.prepareSearch(t,e),i=t.tokens,n=t.options.fields,s=i.length;var r=function(t,e){var o,n;return t?(t=String(t||""),n=t.search(e.regex),-1===n?0:(o=e.string.length/t.length,0===n&&(o+=.5),o)):0},a=function(){var t=n.length;return t?1===t?function(t,e){return r(e[n[0]],t)}:function(e,o){for(var i=0,s=0;t>i;i++)s+=r(o[n[i]],e);return s/t}:function(){return 0}}();return s?1===s?function(t){return a(i[0],t)}:"and"===t.options.conjunction?function(t){for(var e,o=0,n=0;s>o;o++){if(e=a(i[o],t),0>=e)return 0;n+=e}return n/s}:function(t){for(var e=0,o=0;s>e;e++)o+=a(i[e],t);return o/s}:function(){return 0}},t.prototype.getSortFunction=function(t,o){var n,i,s,r,a,l,p,u,d,c,h;if(s=this,t=s.prepareSearch(t,o),h=!t.query&&o.sort_empty||o.sort,d=function(t,e){return"$score"===t?e.score:s.items[e.id][t]},a=[],h)for(n=0,i=h.length;i>n;n++)(t.query||"$score"!==h[n].field)&&a.push(h[n]);if(t.query){for(c=!0,n=0,i=a.length;i>n;n++)if("$score"===a[n].field){c=!1;break}c&&a.unshift({field:"$score",direction:"desc"})}else for(n=0,i=a.length;i>n;n++)if("$score"===a[n].field){a.splice(n,1);break}for(u=[],n=0,i=a.length;i>n;n++)u.push("desc"===a[n].direction?-1:1);return l=a.length,l?1===l?(r=a[0].field,p=u[0],function(t,o){return p*e(d(r,t),d(r,o))}):function(t,o){var n,i,s,r,p;for(n=0;l>n;n++)if(p=a[n].field,i=u[n]*e(d(p,t),d(p,o)))return i;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;e=o({},e);var n=e.fields,i=e.sort,r=e.sort_empty;return n&&!s(n)&&(e.fields=[n]),i&&!s(i)&&(e.sort=[i]),r&&!s(r)&&(e.sort_empty=[r]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var o=this,n,i,s,r,a,l;return s=this.prepareSearch(t,e),e=s.options,t=s.query,l=e.score||o.getScoreFunction(s),t.length?o.iterator(o.items,function(t,o){i=l(t),(e.filter===!1||i>0)&&s.items.push({score:i,id:o})}):o.iterator(o.items,function(t,e){s.items.push({score:1,id:e})}),a=o.getSortFunction(s,e),a&&s.items.sort(a),s.total=s.items.length,"number"==typeof e.limit&&(s.items=s.items.slice(0,e.limit)),s};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:e>t?-1:0:(t=a(String(t||"")),e=a(String(e||"")),t>e?1:e>t?-1:0)},o=function(t,e){var o,n,i,s;for(o=1,n=arguments.length;n>o;o++)if(s=arguments[o])for(i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);return t},n=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},i=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||$&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},r={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},a=function(){var t,e,o,n,i="",s={};for(o in r)if(r.hasOwnProperty(o))for(n=r[o].substring(2,r[o].length-1),i+=n,t=0,e=n.length;e>t;t++)s[n.charAt(t)]=o;var a=new RegExp("["+i+"]","g");return function(t){return t.replace(a,function(t){return s[t]}).toLowerCase()}}();return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var o,n,i,s=this,r=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(o=0,n=t.length;n>o;o++)"string"==typeof t[o]?r.push(t[o]):(s.plugins.settings[t[o].name]=t[o].options,r.push(t[o].name));else if(t)for(i in t)t.hasOwnProperty(i)&&(s.plugins.settings[i]=t[i],r.push(i));for(;r.length;)s.require(r.shift())},t.prototype.loadPlugin=function(e){var o=this,n=o.plugins,i=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=i.fn.apply(o,[o.plugins.settings[e]||{}]),n.names.push(e)},t.prototype.require=function(t){var e=this,o=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(o.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return o.loaded[t]},t.define=function(e,o){t.plugins[e]={name:e,fn:o}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function($,t,e){"use strict";var o=function(t,e){if("string"!=typeof e||e.length){var o="string"==typeof e?new RegExp(e,"i"):e,n=function(t){var e=0;if(3===t.nodeType){var i=t.data.search(o);if(i>=0&&t.data.length>0){var s=t.data.match(o),r=document.createElement("span");r.className="highlight";var a=t.splitText(i),l=a.splitText(s[0].length),p=a.cloneNode(!0);r.appendChild(p),a.parentNode.replaceChild(r,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var u=0;u<t.childNodes.length;++u)u+=n(t.childNodes[u]);return e};return t.each(function(){n(this)})}},n=function(){};n.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var o=arguments.length;return 0===o?delete this._events:1===o?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(t){for(var e=["on","off","trigger"],o=0;o<e.length;o++)t.prototype[e[o]]=n.prototype[e[o]]};var i=/Mac/.test(navigator.userAgent),s=65,r=188,a=13,l=27,p=37,u=38,d=80,c=39,h=40,f=78,g=8,m=46,v=16,y=i?91:17,w=i?18:17,b=9,C=1,O=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,S=function(t){return"undefined"!=typeof t},_=function(t){return"undefined"==typeof t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},I=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},k=function(t){return(t+"").replace(/\$/g,"$$$$")},P={};P.before=function(t,e,o){var n=t[e];t[e]=function(){return o.apply(t,arguments),n.apply(t,arguments)}},P.after=function(t,e,o){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return o.apply(t,arguments),e}};var T=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},F=function(t,e){var o;return function(){var n=this,i=arguments;window.clearTimeout(o),o=window.setTimeout(function(){t.apply(n,i)},e)}},D=function(t,e,o){var n,i=t.trigger,s={};t.trigger=function(){var o=arguments[0];return-1===e.indexOf(o)?i.apply(t,arguments):void(s[o]=arguments)},o.apply(t,[]),t.trigger=i;for(n in s)s.hasOwnProperty(n)&&i.apply(t,s[n])},A=function(t,e,o,n){t.on(e,o,function(e){for(var o=e.target;o&&o.parentNode!==t[0];)o=o.parentNode;return e.currentTarget=o,n.apply(this,[e])})},z=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var o=document.selection.createRange(),n=document.selection.createRange().text.length;o.moveStart("character",-t.value.length),e.start=o.text.length-n,e.length=n}return e},j=function(t,e,o){var n,i,s={};if(o)for(n=0,i=o.length;i>n;n++)s[o[n]]=t.css(o[n]);else s=t.css();e.css(s)},q=function(t,e){if(!t)return 0;var o=$("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");j(e,o,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=o.width();return o.remove(),n},H=function(t){var e=null,o=function(o,n){var i,s,r,a,l,p,u,d;o=o||window.event||{},n=n||{},o.metaKey||o.altKey||(n.force||t.data("grow")!==!1)&&(i=t.val(),o.type&&"keydown"===o.type.toLowerCase()&&(s=o.keyCode,r=s>=97&&122>=s||s>=65&&90>=s||s>=48&&57>=s||32===s,s===m||s===g?(d=z(t[0]),d.length?i=i.substring(0,d.start)+i.substring(d.start+d.length):s===g&&d.start?i=i.substring(0,d.start-1)+i.substring(d.start+1):s===m&&"undefined"!=typeof d.start&&(i=i.substring(0,d.start)+i.substring(d.start+1))):r&&(p=o.shiftKey,u=String.fromCharCode(o.keyCode),u=p?u.toUpperCase():u.toLowerCase(),i+=u)),a=t.attr("placeholder"),!i&&a&&(i=a),l=q(i,t)+4,l!==e&&(e=l,t.width(l),t.triggerHandler("resize")))};t.on("keydown keyup update blur",o),o()},E=function(e,o){var n,i,s,r,a,l=this;a=e[0],a.selectize=l;var p=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=p?p.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,r=r||e.parents("[dir]:first").attr("dir")||"",$.extend(l,{order:0,settings:o,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?C:O,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++E.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===o.loadThrottle?l.onSearchChange:F(l.onSearchChange,o.loadThrottle)}),l.sifter=new t(this.options,{diacritics:o.diacritics}),l.settings.options){for(i=0,s=l.settings.options.length;s>i;i++)l.registerOption(l.settings.options[i]);delete l.settings.options}if(l.settings.optgroups){for(i=0,s=l.settings.optgroups.length;s>i;i++)l.registerOptionGroup(l.settings.optgroups[i]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return n.mixin(E),e.mixin(E),$.extend(E.prototype,{setup:function(){var t=this,e=t.settings,o=t.eventNS,n=$(window),s=$(document),r=t.$input,a,l,p,u,d,c,h,f,g,m,b;if(h=t.settings.mode,m=r.attr("class")||"",a=$("<div>").addClass(e.wrapperClass).addClass(m).addClass(h),l=$("<div>").addClass(e.inputClass).addClass("items").appendTo(a),p=$('<input type="text" autocomplete="off" />').appendTo(l).attr("tabindex",r.is(":disabled")?"-1":t.tabIndex),c=$(e.dropdownParent||a),u=$("<div>").addClass(e.dropdownClass).addClass(h).hide().appendTo(c),d=$("<div>").addClass(e.dropdownContentClass).appendTo(u),t.settings.copyClassesToDropdown&&u.addClass(m),a.css({width:r[0].style.width}),t.plugins.names.length&&(b="plugin-"+t.plugins.names.join(" plugin-"),a.addClass(b),u.addClass(b)),(null===e.maxItems||e.maxItems>1)&&t.tagType===C&&r.attr("multiple","multiple"),t.settings.placeholder&&p.attr("placeholder",e.placeholder),!t.settings.splitOn&&t.settings.delimiter){var O=t.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");t.settings.splitOn=new RegExp("\\s*"+O+"+\\s*")}r.attr("autocorrect")&&p.attr("autocorrect",r.attr("autocorrect")),r.attr("autocapitalize")&&p.attr("autocapitalize",r.attr("autocapitalize")),t.$wrapper=a,t.$control=l,t.$control_input=p,t.$dropdown=u,t.$dropdown_content=d,u.on("mouseenter","[data-selectable]",function(){return t.onOptionHover.apply(t,arguments)}),u.on("mousedown click","[data-selectable]",function(){return t.onOptionSelect.apply(t,arguments)}),A(l,"mousedown","*:not(input)",function(){return t.onItemSelect.apply(t,arguments)}),H(p),l.on({mousedown:function(){return t.onMouseDown.apply(t,arguments)},click:function(){return t.onClick.apply(t,arguments)}}),p.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return t.onKeyDown.apply(t,arguments)},keyup:function(){return t.onKeyUp.apply(t,arguments)},keypress:function(){return t.onKeyPress.apply(t,arguments)},resize:function(){t.positionDropdown.apply(t,[])},blur:function(){return t.onBlur.apply(t,arguments)},focus:function(){return t.ignoreBlur=!1,t.onFocus.apply(t,arguments)},paste:function(){return t.onPaste.apply(t,arguments)}}),s.on("keydown"+o,function(e){t.isCmdDown=e[i?"metaKey":"ctrlKey"],t.isCtrlDown=e[i?"altKey":"ctrlKey"],t.isShiftDown=e.shiftKey}),s.on("keyup"+o,function(e){e.keyCode===w&&(t.isCtrlDown=!1),e.keyCode===v&&(t.isShiftDown=!1),e.keyCode===y&&(t.isCmdDown=!1)}),s.on("mousedown"+o,function(e){if(t.isFocused){if(e.target===t.$dropdown[0]||e.target.parentNode===t.$dropdown[0])return!1;t.$control.has(e.target).length||e.target===t.$control[0]||t.blur(e.target)}}),n.on(["scroll"+o,"resize"+o].join(" "),function(){t.isOpen&&t.positionDropdown.apply(t,arguments)}),n.on("mousemove"+o,function(){t.ignoreHover=!1}),this.revertSettings={$children:r.children().detach(),tabindex:r.attr("tabindex")},r.attr("tabindex",-1).hide().after(t.$wrapper),$.isArray(e.items)&&(t.setValue(e.items),delete e.items),x&&r.on("invalid"+o,function(e){e.preventDefault(),t.isInvalid=!0,t.refreshState()}),t.updateOriginalInput(),t.refreshItems(),t.refreshState(),t.updatePlaceholder(),t.isSetup=!0,r.is(":disabled")&&t.disable(),t.on("change",this.onChange),r.data("selectize",t),r.addClass("selectized"),t.trigger("initialize"),e.preload===!0&&t.onSearchChange("")},setupTemplates:function(){var t=this,e=t.settings.labelField,o=t.settings.optgroupLabelField,n={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[o])+"</div>"},option:function(t,o){return'<div class="option">'+o(t[e])+"</div>"},item:function(t,o){return'<div class="item">'+o(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};t.settings.render=$.extend({},n,t.settings.render)},setupCallbacks:function(){var t,e,o={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in o)o.hasOwnProperty(t)&&(e=this.settings[o[t]],e&&this.on(t,e))},onClick:function(t){var e=this;e.isFocused||(e.focus(),t.preventDefault())},onMouseDown:function(t){var e=this,o=t.isDefaultPrevented(),n=$(t.target);if(e.isFocused){if(t.target!==e.$control_input[0])return"single"===e.settings.mode?e.isOpen?e.close():e.open():o||e.setActiveItem(null),!1}else o||window.setTimeout(function(){e.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?t.preventDefault():e.settings.splitOn&&setTimeout(function(){for(var t=$.trim(e.$control_input.val()||"").split(e.settings.splitOn),o=0,n=t.length;n>o;o++)e.createItem(t[o])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=t.target===this.$control_input[0],o=this;if(o.isLocked)return void(t.keyCode!==b&&t.preventDefault());switch(t.keyCode){case s:if(o.isCmdDown)return void o.selectAll();break;case l:return void(o.isOpen&&(t.preventDefault(),t.stopPropagation(),o.close()));case f:if(!t.ctrlKey||t.altKey)break;case h:if(!o.isOpen&&o.hasOptions)o.open();else if(o.$activeOption){o.ignoreHover=!0;var n=o.getAdjacentOption(o.$activeOption,1);n.length&&o.setActiveOption(n,!0,!0)}return void t.preventDefault();case d:if(!t.ctrlKey||t.altKey)break;case u:if(o.$activeOption){o.ignoreHover=!0;var r=o.getAdjacentOption(o.$activeOption,-1);r.length&&o.setActiveOption(r,!0,!0)}return void t.preventDefault();case a:return void(o.isOpen&&o.$activeOption&&(o.onOptionSelect({currentTarget:o.$activeOption}),t.preventDefault()));case p:return void o.advanceSelection(-1,t);case c:return void o.advanceSelection(1,t);case b:return o.settings.selectOnTab&&o.isOpen&&o.$activeOption&&(o.onOptionSelect({currentTarget:o.$activeOption}),o.isFull()||t.preventDefault()),void(o.settings.create&&o.createItem()&&t.preventDefault());case g:case m:return void o.deleteSelection(t)}return!o.isFull()&&!o.isInputHidden||(i?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var o=e.$control_input.val()||"";e.lastValue!==o&&(e.lastValue=o,e.onSearchChange(o),e.refreshOptions(),e.trigger("type",o))},onSearchChange:function(t){var e=this,o=e.settings.load;o&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(n){o.apply(e,[t,n])})))},onFocus:function(t){var e=this,o=e.isFocused;return e.isDisabled?(e.blur(),t&&t.preventDefault(),!1):void(e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),o||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState()))},onBlur:function(t,e){var o=this;if(o.isFocused&&(o.isFocused=!1,!o.ignoreFocus)){if(!o.ignoreBlur&&document.activeElement===o.$dropdown_content[0])return o.ignoreBlur=!0,void o.onFocus(t);var n=function(){o.close(),o.setTextboxValue(""),o.setActiveItem(null),o.setActiveOption(null),o.setCaret(o.items.length),o.refreshState(),(e||document.body).focus(),o.ignoreFocus=!1,o.trigger("blur")};o.ignoreFocus=!0,o.settings.create&&o.settings.createOnBlur?o.createItem(null,!1,n):n()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(t){var e,o,n,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),o=$(t.currentTarget),o.hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):(e=o.attr("data-value"),"undefined"!=typeof e&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(e),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(e))))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,o=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||o.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input,o=e.val()!==t;o&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===C&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){var o=e?[]:["change"];D(this,o,function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(t,e){var o=this,n,i,s,r,a,l,p,u;if("single"!==o.settings.mode){if(t=$(t),!t.length)return $(o.$activeItems).removeClass("active"),o.$activeItems=[],void(o.isFocused&&o.showInput());if(n=e&&e.type.toLowerCase(),"mousedown"===n&&o.isShiftDown&&o.$activeItems.length){for(u=o.$control.children(".active:last"),r=Array.prototype.indexOf.apply(o.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(o.$control[0].childNodes,[t[0]]),r>a&&(p=r,r=a,a=p),i=r;a>=i;i++)l=o.$control[0].childNodes[i],-1===o.$activeItems.indexOf(l)&&($(l).addClass("active"),o.$activeItems.push(l));e.preventDefault()}else"mousedown"===n&&o.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(s=o.$activeItems.indexOf(t[0]),o.$activeItems.splice(s,1),t.removeClass("active")):o.$activeItems.push(t.addClass("active")[0]):($(o.$activeItems).removeClass("active"),o.$activeItems=[t.addClass("active")[0]]);o.hideInput(),this.isFocused||o.focus()}},setActiveOption:function(t,e,o){var n,i,s,r,a,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,t=$(t),t.length&&(l.$activeOption=t.addClass("active"),(e||!S(e))&&(n=l.$dropdown_content.height(),i=l.$activeOption.outerHeight(!0),e=l.$dropdown_content.scrollTop()||0,s=l.$activeOption.offset().top-l.$dropdown_content.offset().top+e,r=s,a=s-n+i,s+i>n+e?l.$dropdown_content.stop().animate({scrollTop:a},o?l.settings.scrollDuration:0):e>s&&l.$dropdown_content.stop().animate({scrollTop:r},o?l.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(t){var e,o,n,i,s,r=this,a=r.settings,l=this.getSearchOptions();if(a.score&&(s=r.settings.score.apply(this,[t]),"function"!=typeof s))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==r.lastQuery?(r.lastQuery=t,i=r.sifter.search(t,$.extend(l,{score:s})),r.currentResults=i):i=$.extend(!0,{},r.currentResults),a.hideSelected)for(e=i.items.length-1;e>=0;e--)-1!==r.items.indexOf(_(i.items[e].id))&&i.items.splice(e,1);return i},refreshOptions:function(t){var e,n,i,s,r,a,l,p,u,d,c,h,f,g,m,v;"undefined"==typeof t&&(t=!0);var y=this,w=$.trim(y.$control_input.val()),b=y.search(w),C=y.$dropdown_content,O=y.$activeOption&&_(y.$activeOption.attr("data-value"));for(s=b.items.length,"number"==typeof y.settings.maxOptions&&(s=Math.min(s,y.settings.maxOptions)),r={},a=[],e=0;s>e;e++)for(l=y.options[b.items[e].id],p=y.render("option",l),u=l[y.settings.optgroupField]||"",d=$.isArray(u)?u:[u],n=0,i=d&&d.length;i>n;n++)u=d[n],y.optgroups.hasOwnProperty(u)||(u=""),r.hasOwnProperty(u)||(r[u]=[],a.push(u)),r[u].push(p);for(this.settings.lockOptgroupOrder&&a.sort(function(t,e){var o=y.optgroups[t].$order||0,n=y.optgroups[e].$order||0;return o-n}),c=[],e=0,s=a.length;s>e;e++)u=a[e],y.optgroups.hasOwnProperty(u)&&r[u].length?(h=y.render("optgroup_header",y.optgroups[u])||"",h+=r[u].join(""),c.push(y.render("optgroup",$.extend({},y.optgroups[u],{html:h})))):c.push(r[u].join(""));if(C.html(c.join("")),y.settings.highlight&&b.query.length&&b.tokens.length)for(e=0,s=b.tokens.length;s>e;e++)o(C,b.tokens[e].regex);if(!y.settings.hideSelected)for(e=0,s=y.items.length;s>e;e++)y.getOption(y.items[e]).addClass("selected");f=y.canCreate(w),f&&(C.prepend(y.render("option_create",{input:w})),v=$(C[0].childNodes[0])),y.hasOptions=b.items.length>0||f,y.hasOptions?(b.items.length>0?(m=O&&y.getOption(O),m&&m.length?g=m:"single"===y.settings.mode&&y.items.length&&(g=y.getOption(y.items[0])),g&&g.length||(g=v&&!y.settings.addPrecedence?y.getAdjacentOption(v,1):C.find("[data-selectable]:first"))):g=v,y.setActiveOption(g),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var e,o,n,i=this;if($.isArray(t))for(e=0,o=t.length;o>e;e++)i.addOption(t[e]);else(n=i.registerOption(t))&&(i.userOptions[n]=!0,i.lastQuery=null,i.trigger("option_add",n,t))},registerOption:function(t){var e=_(t[this.settings.valueField]);return!e||this.options.hasOwnProperty(e)?!1:(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=_(t[this.settings.optgroupValueField]);return e?(t.$order=t.$order||++this.order,this.optgroups[e]=t,e):!1},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,e){var o=this,n,i,s,r,a,l,p;if(t=_(t),s=_(e[o.settings.valueField]),null!==t&&o.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");p=o.options[t].$order,s!==t&&(delete o.options[t],r=o.items.indexOf(t),-1!==r&&o.items.splice(r,1,s)),e.$order=e.$order||p,o.options[s]=e,a=o.renderCache.item,l=o.renderCache.option,a&&(delete a[t],delete a[s]),l&&(delete l[t],delete l[s]),-1!==o.items.indexOf(s)&&(n=o.getItem(t),i=$(o.render("item",e)),n.hasClass("active")&&i.addClass("active"),n.replaceWith(i)),o.lastQuery=null,o.isOpen&&o.refreshOptions(!1)}},removeOption:function(t,e){var o=this;t=_(t);var n=o.renderCache.item,i=o.renderCache.option;n&&delete n[t],i&&delete i[t],delete o.userOptions[t],delete o.options[t],o.lastQuery=null,o.trigger("option_remove",t),o.removeItem(t,e)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,e){var o=this.$dropdown.find("[data-selectable]"),n=o.index(t)+e;return n>=0&&n<o.length?o.eq(n):$()},getElementWithValue:function(t,e){if(t=_(t),"undefined"!=typeof t&&null!==t)for(var o=0,n=e.length;n>o;o++)if(e[o].getAttribute("data-value")===t)return $(e[o]);return $()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(t,e){for(var o=$.isArray(t)?t:[t],n=0,i=o.length;i>n;n++)this.isPending=i-1>n,this.addItem(o[n],e)},addItem:function(t,e){var o=e?[]:["change"];D(this,o,function(){var o,n,i,s=this,r=s.settings.mode,a,l,p,u;return t=_(t),-1!==s.items.indexOf(t)?void("single"===r&&s.close()):void(s.options.hasOwnProperty(t)&&("single"===r&&s.clear(e),"multi"===r&&s.isFull()||(o=$(s.render("item",s.options[t])),u=s.isFull(),s.items.splice(s.caretPos,0,t),s.insertAtCaret(o),(!s.isPending||!u&&s.isFull())&&s.refreshState(),s.isSetup&&(i=s.$dropdown_content.find("[data-selectable]"),s.isPending||(n=s.getOption(t),p=s.getAdjacentOption(n,1).attr("data-value"),s.refreshOptions(s.isFocused&&"single"!==r),p&&s.setActiveOption(s.getOption(p))),!i.length||s.isFull()?s.close():s.positionDropdown(),s.updatePlaceholder(),s.trigger("item_add",t,o),s.updateOriginalInput({silent:e})))))})},removeItem:function(t,e){var o=this,n,i,s;n="object"==typeof t?t:o.getItem(t),t=_(n.attr("data-value")),i=o.items.indexOf(t),-1!==i&&(n.remove(),n.hasClass("active")&&(s=o.$activeItems.indexOf(n[0]),o.$activeItems.splice(s,1)),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(t)&&o.removeOption(t,e),i<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:e}),o.positionDropdown(),o.trigger("item_remove",t,n))},createItem:function(t,e){var o=this,n=o.caretPos;t=t||$.trim(o.$control_input.val()||"");var i=arguments[arguments.length-1];if("function"!=typeof i&&(i=function(){}),"boolean"!=typeof e&&(e=!0),!o.canCreate(t))return i(),!1;o.lock();var s="function"==typeof o.settings.create?this.settings.create:function(t){var e={};return e[o.settings.labelField]=t,e[o.settings.valueField]=t,e},r=T(function(t){if(o.unlock(),!t||"object"!=typeof t)return i();var s=_(t[o.settings.valueField]);return"string"!=typeof s?i():(o.setTextboxValue(""),o.addOption(t),o.setCaret(n),o.addItem(s),o.refreshOptions(e&&"single"!==o.settings.mode),void i(t))}),a=s.apply(this,[t,r]);return"undefined"!=typeof a&&r(a),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var t,e=this;e.isRequired&&(e.items.length&&(e.isInvalid=!1),e.$control_input.prop("required",t)),e.refreshClasses()},refreshClasses:function(){var t=this,e=t.isFull(),o=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",o).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!$.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!e&&!o)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,o,n,i,s=this;if(t=t||{},s.tagType===C){for(n=[],e=0,o=s.items.length;o>e;e++)i=s.options[s.items[e]][s.settings.labelField]||"",n.push('<option value="'+I(s.items[e])+'" selected="selected">'+I(i)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),s.$input.html(n.join(""))}else s.$input.val(s.getValue()),s.$input.attr("value",s.$input.val());s.isSetup&&(t.silent||s.trigger("change",s.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&t.hideInput(),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length);0===e?this.$control.prepend(t):$(this.$control[0].childNodes[e]).before(t),this.setCaret(e+1)},deleteSelection:function(t){var e,o,n,i,s,r,a,l,p,u=this;if(n=t&&t.keyCode===g?-1:1,i=z(u.$control_input[0]),u.$activeOption&&!u.settings.hideSelected&&(a=u.getAdjacentOption(u.$activeOption,-1).attr("data-value")),
s=[],u.$activeItems.length){for(p=u.$control.children(".active:"+(n>0?"last":"first")),r=u.$control.children(":not(input)").index(p),n>0&&r++,e=0,o=u.$activeItems.length;o>e;e++)s.push($(u.$activeItems[e]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(u.isFocused||"single"===u.settings.mode)&&u.items.length&&(0>n&&0===i.start&&0===i.length?s.push(u.items[u.caretPos-1]):n>0&&i.start===u.$control_input.val().length&&s.push(u.items[u.caretPos]));if(!s.length||"function"==typeof u.settings.onDelete&&u.settings.onDelete.apply(u,[s])===!1)return!1;for("undefined"!=typeof r&&u.setCaret(r);s.length;)u.removeItem(s.pop());return u.showInput(),u.positionDropdown(),u.refreshOptions(!0),a&&(l=u.getOption(a),l.length&&u.setActiveOption(l)),!0},advanceSelection:function(t,e){var o,n,i,s,r,a,l=this;0!==t&&(l.rtl&&(t*=-1),o=t>0?"last":"first",n=z(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(s=l.$control_input.val().length,r=0>t?0===n.start&&0===n.length:n.start===s,r&&!s&&l.advanceCaret(t,e)):(a=l.$control.children(".active:"+o),a.length&&(i=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(t>0?i+1:i))))},advanceCaret:function(t,e){var o=this,n,i;0!==t&&(n=t>0?"next":"prev",o.isShiftDown?(i=o.$control_input[n](),i.length&&(o.hideInput(),o.setActiveItem(i),e&&e.preventDefault())):o.setCaret(o.caretPos+t))},setCaret:function(t){var e=this;if(t="single"===e.settings.mode?e.items.length:Math.max(0,Math.min(e.items.length,t)),!e.isPending){var o,n,i,s,r;for(s=e.$control.children(":not(input)"),o=0,n=s.length;n>o;o++)r=$(s[o]).detach(),t>o?e.$control_input.before(r):e.$control.append(r)}e.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var t=this,e=t.eventNS,o=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(o.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:o.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),$(window).off(e),$(document).off(e),$(document.body).off(e),delete t.$input[0].selectize},render:function(t,e){var o,n,i,s="",r=!1,a=this,l=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===t||"item"===t)&&(o=_(e[a.settings.valueField]),r=!!o),r&&(S(a.renderCache[t])||(a.renderCache[t]={}),a.renderCache[t].hasOwnProperty(o))?a.renderCache[t][o]:(s=a.settings.render[t].apply(this,[e,I]),("option"===t||"option_create"===t)&&(s=s.replace(l,"<$1 data-selectable")),"optgroup"===t&&(n=e[a.settings.optgroupValueField]||"",s=s.replace(l,'<$1 data-group="'+k(I(n))+'"')),("option"===t||"item"===t)&&(s=s.replace(l,'<$1 data-value="'+k(I(o||""))+'"')),r&&(a.renderCache[t][o]=s),s)},clearCache:function(t){var e=this;"undefined"==typeof t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var o=e.settings.createFilter;return t.length&&("function"!=typeof o||o.apply(e,[t]))&&("string"!=typeof o||new RegExp(o).test(t))&&(!(o instanceof RegExp)||o.test(t))}}),E.count=0,E.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},$.fn.selectize=function(t){var e=$.fn.selectize.defaults,o=$.extend({},e,t),n=o.dataAttr,i=o.labelField,s=o.valueField,r=o.optgroupField,a=o.optgroupLabelField,l=o.optgroupValueField,p=function(t,e){var r,a,l,p,u=t.attr(n);if(u)for(e.options=JSON.parse(u),r=0,a=e.options.length;a>r;r++)e.items.push(e.options[r][s]);else{var d=$.trim(t.val()||"");if(!o.allowEmptyOption&&!d.length)return;for(l=d.split(o.delimiter),r=0,a=l.length;a>r;r++)p={},p[i]=l[r],p[s]=l[r],e.options.push(p);e.items=l}},u=function(t,e){var p,u,d,c,h=0,f=e.options,g={},m=function(t){var e=n&&t.attr(n);return"string"==typeof e&&e.length?JSON.parse(e):null},v=function(t,n){t=$(t);var a=_(t.attr("value"));if(a||o.allowEmptyOption)if(g.hasOwnProperty(a)){if(n){var l=g[a][r];l?$.isArray(l)?l.push(n):g[a][r]=[l,n]:g[a][r]=n}}else{var p=m(t)||{};p[i]=p[i]||t.text(),p[s]=p[s]||a,p[r]=p[r]||n,g[a]=p,f.push(p),t.is(":selected")&&e.items.push(a)}},y=function(t){var o,n,i,s,r;for(t=$(t),i=t.attr("label"),i&&(s=m(t)||{},s[a]=i,s[l]=i,e.optgroups.push(s)),r=$("option",t),o=0,n=r.length;n>o;o++)v(r[o],i)};for(e.maxItems=t.attr("multiple")?null:1,c=t.children(),p=0,u=c.length;u>p;p++)d=c[p].tagName.toLowerCase(),"optgroup"===d?y(c[p]):"option"===d&&v(c[p])};return this.each(function(){if(!this.selectize){var n,i=$(this),s=this.tagName.toLowerCase(),r=i.attr("placeholder")||i.attr("data-placeholder");r||o.allowEmptyOption||(r=i.children('option[value=""]').text());var a={placeholder:r,options:[],optgroups:[],items:[]};"select"===s?u(i,a):p(i,a),n=new E(i,$.extend(!0,{},e,a,t))}})},$.fn.selectize.defaults=E.defaults,$.fn.selectize.support={validity:x},E.define("drag_drop",function(t){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e=this;e.lock=function(){var t=e.lock;return function(){var o=e.$control.data("sortable");return o&&o.disable(),t.apply(e,arguments)}}(),e.unlock=function(){var t=e.unlock;return function(){var o=e.$control.data("sortable");return o&&o.enable(),t.apply(e,arguments)}}(),e.setup=function(){var t=e.setup;return function(){t.apply(this,arguments);var o=e.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),o.css({overflow:"visible"})},stop:function(){o.css({overflow:"hidden"});var t=e.$activeItems?e.$activeItems.slice():null,n=[];o.children("[data-value]").each(function(){n.push($(this).attr("data-value"))}),e.setValue(n),e.setActiveItem(t)}})}}()}}),E.define("dropdown_header",function(t){var e=this;t=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},t),e.setup=function(){var o=e.setup;return function(){o.apply(e,arguments),e.$dropdown_header=$(t.html(t)),e.$dropdown.prepend(e.$dropdown_header)}}()}),E.define("optgroup_columns",function(t){var e=this;t=$.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,e){var o=t.closest("[data-group]").find("[data-selectable]"),n=o.index(t)+e;return n>=0&&n<o.length?o.eq(n):$()},this.onKeyDown=function(){var t=e.onKeyDown;return function(o){var n,i,s,r;return!this.isOpen||o.keyCode!==p&&o.keyCode!==c?t.apply(this,arguments):(e.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),n=r.find("[data-selectable]").index(this.$activeOption),r=o.keyCode===p?r.prev("[data-group]"):r.next("[data-group]"),s=r.find("[data-selectable]"),i=s.eq(Math.min(s.length-1,n)),void(i.length&&this.setActiveOption(i)))}}();var o=function(){var t,e=o.width,n=document;return"undefined"==typeof e&&(t=n.createElement("div"),t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,n.body.appendChild(t),e=o.width=t.offsetWidth-t.clientWidth,n.body.removeChild(t)),e},n=function(){var n,i,s,r,a,l,p;if(p=$("[data-group]",e.$dropdown_content),i=p.length,i&&e.$dropdown_content.width()){if(t.equalizeHeight){for(s=0,n=0;i>n;n++)s=Math.max(s,p.eq(n).height());p.css({height:s})}t.equalizeWidth&&(l=e.$dropdown_content.innerWidth()-o(),r=Math.round(l/i),p.css({width:r}),i>1&&(a=l-r*(i-1),p.eq(i-1).css({width:a})))}};(t.equalizeHeight||t.equalizeWidth)&&(P.after(this,"positionDropdown",n),P.after(this,"refreshOptions",n))}),E.define("remove_button",function(t){if("single"!==this.settings.mode){t=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=this,o='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+I(t.title)+'">'+t.label+"</a>",n=function(t,e){var o=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,o)+e+t.substring(o)};this.setup=function(){var i=e.setup;return function(){if(t.append){var s=e.settings.render.item;e.settings.render.item=function(t){return n(s.apply(this,arguments),o)}}i.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!e.isLocked){var o=$(t.currentTarget).parent();e.setActiveItem(o),e.deleteSelection()&&e.setCaret(e.items.length)}})}}()}}),E.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var o=e.onKeyDown;return function(e){var n,i;return e.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(i=this.options[this.items[n]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[i])),this.refreshOptions(!0)),void e.preventDefault()):o.apply(this,arguments)}}()}),E}),function($,t,e){function o(t,e){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=$(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=$.extend({},a,e),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function n(t,e){var o=!0;return $.each(t,function(n,i){return"undefined"==typeof e[n]||t[n]!==e[n]?(o=!1,!1):void 0}),o}function i(){return!p&&l}function s(){var t=e.body||e.documentElement,o=t.style,n="transition";if("string"==typeof o[n])return!0;v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof o[v[i]+n])return!0;return!1}var r="tooltipster",a={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(t,e){},functionBefore:function(t,e){e()},functionReady:function(t,e){},functionAfter:function(t){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(t){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};o.prototype={_init:function(){var t=this;if(e.querySelector){var o=null;void 0===t.$el.data("tooltipster-initialTitle")&&(o=t.$el.attr("title"),void 0===o&&(o=null),t.$el.data("tooltipster-initialTitle",o)),null!==t.options.content?t._content_set(t.options.content):t._content_set(o);var n=t.options.functionInit.call(t.$el,t.$el,t.Content);"undefined"!=typeof n&&t._content_set(n),t.$el.removeAttr("title").addClass("tooltipstered"),!l&&t.options.iconDesktop||l&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=$('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){(!i()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){(!i()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)}),l&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){(!i()||t.options.touchDevices)&&t._show()})}},_show:function(){var t=this;"shown"!=t.Status&&"appearing"!=t.Status&&(t.options.delay?t.timerShow=setTimeout(function(){("click"==t.options.trigger||"hover"==t.options.trigger&&t.mouseIsOverProxy)&&t._showNow()},t.options.delay):t._showNow())},_showNow:function(e){var o=this;o.options.functionBefore.call(o.$el,o.$el,function(){if(o.enabled&&null!==o.Content){e&&o.callbacks.show.push(e),o.callbacks.hide=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null,o.options.onlyOne&&$(".tooltipstered").not(o.$el).each(function(t,e){var o=$(e),n=o.data("tooltipster-ns");$.each(n,function(t,e){var n=o.data(e),i=n.status(),s=n.option("autoClose");"hidden"!==i&&"disappearing"!==i&&s&&n.hide()})});var n=function(){o.Status="shown",$.each(o.callbacks.show,function(t,e){e.call(o.$el)}),o.callbacks.show=[]};if("hidden"!==o.Status){var i=0;"disappearing"===o.Status?(o.Status="appearing",s()?(o.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+o.options.animation+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.stop().fadeIn(n)):"shown"===o.Status&&n()}else{o.Status="appearing";var i=o.options.speed;o.bodyOverflowX=$("body").css("overflow-x"),$("body").css("overflow-x","hidden");var r="tooltipster-"+o.options.animation,a="-webkit-transition-duration: "+o.options.speed+"ms; -webkit-animation-duration: "+o.options.speed+"ms; -moz-transition-duration: "+o.options.speed+"ms; -moz-animation-duration: "+o.options.speed+"ms; -o-transition-duration: "+o.options.speed+"ms; -o-animation-duration: "+o.options.speed+"ms; -ms-transition-duration: "+o.options.speed+"ms; -ms-animation-duration: "+o.options.speed+"ms; transition-duration: "+o.options.speed+"ms; animation-duration: "+o.options.speed+"ms;",p=o.options.minWidth?"min-width:"+Math.round(o.options.minWidth)+"px;":"",u=o.options.maxWidth?"max-width:"+Math.round(o.options.maxWidth)+"px;":"",d=o.options.interactive?"pointer-events: auto;":"";if(o.$tooltip=$('<div class="tooltipster-base '+o.options.theme+'" style="'+p+" "+u+" "+d+" "+a+'"><div class="tooltipster-content"></div></div>'),s()&&o.$tooltip.addClass(r),o._content_insert(),o.$tooltip.appendTo("body"),o.reposition(),o.options.functionReady.call(o.$el,o.$el,o.$tooltip),s()?(o.$tooltip.addClass(r+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.css("display","none").fadeIn(o.options.speed,n),o._interval_set(),$(t).on("scroll."+o.namespace+" resize."+o.namespace,function(){o.reposition()}),o.options.autoClose)if($("body").off("."+o.namespace),"hover"==o.options.trigger){if(l&&setTimeout(function(){$("body").on("touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive){l&&o.$tooltip.on("touchstart."+o.namespace,function(t){t.stopPropagation()});var c=null;o.$elProxy.add(o.$tooltip).on("mouseleave."+o.namespace+"-autoClose",function(){clearTimeout(c),c=setTimeout(function(){o.hide()},o.options.interactiveTolerance)}).on("mouseenter."+o.namespace+"-autoClose",function(){clearTimeout(c)})}else o.$elProxy.on("mouseleave."+o.namespace+"-autoClose",function(){o.hide()});o.options.hideOnClick&&o.$elProxy.on("click."+o.namespace+"-autoClose",function(){o.hide()})}else"click"==o.options.trigger&&(setTimeout(function(){$("body").on("click."+o.namespace+" touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive&&o.$tooltip.on("click."+o.namespace+" touchstart."+o.namespace,function(t){t.stopPropagation()}))}o.options.timer>0&&(o.timerHide=setTimeout(function(){o.timerHide=null,o.hide()},o.options.timer+i))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(0===$("body").find(t.$el).length||0===$("body").find(t.$elProxy).length||"hidden"==t.Status||0===$("body").find(t.$tooltip).length)("shown"==t.Status||"appearing"==t.Status)&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var e=t._repositionInfo(t.$elProxy),o=!1;n(e.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?n(e.position,t.elProxyPosition.position)&&(o=!0):n(e.offset,t.elProxyPosition.offset)&&(o=!0)),o||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(t){"object"==typeof t&&null!==t&&this.options.contentCloning&&(t=t.clone(!0)),this.Content=t},_content_insert:function(){var t=this,e=this.$tooltip.find(".tooltipster-content");"string"!=typeof t.Content||t.options.contentAsHTML?e.empty().append(t.Content):e.text(t.Content)},_update:function(t){var e=this;e._content_set(t),null!==e.Content?"hidden"!==e.Status&&(e._content_insert(),e.reposition(),e.options.updateAnimation&&(s()?(e.$tooltip.css({width:"","-webkit-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=e.Status&&(e.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==e.Status&&e.$tooltip.css({"-webkit-transition":e.options.speed+"ms","-moz-transition":e.options.speed+"ms","-o-transition":e.options.speed+"ms","-ms-transition":e.options.speed+"ms",transition:e.options.speed+"ms"})},e.options.speed))},e.options.speed)):e.$tooltip.fadeTo(e.options.speed,.5,function(){"hidden"!=e.Status&&e.$tooltip.fadeTo(e.options.speed,1)}))):e.hide()},_repositionInfo:function(t){return{dimension:{height:t.outerHeight(!1),width:t.outerWidth(!1)},offset:t.offset(),position:{left:parseInt(t.css("left")),top:parseInt(t.css("top"))}}},hide:function(e){var o=this;e&&o.callbacks.hide.push(e),o.callbacks.show=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null;var n=function(){$.each(o.callbacks.hide,function(t,e){e.call(o.$el)}),o.callbacks.hide=[]};if("shown"==o.Status||"appearing"==o.Status){o.Status="disappearing";var i=function(){o.Status="hidden","object"==typeof o.Content&&null!==o.Content&&o.Content.detach(),o.$tooltip.remove(),o.$tooltip=null,$(t).off("."+o.namespace),$("body").off("."+o.namespace).css("overflow-x",o.bodyOverflowX),$("body").off("."+o.namespace),o.$elProxy.off("."+o.namespace+"-autoClose"),o.options.functionAfter.call(o.$el,o.$el),n()};s()?(o.$tooltip.clearQueue().removeClass("tooltipster-"+o.options.animation+"-show").addClass("tooltipster-dying"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(i)):o.$tooltip.stop().fadeOut(o.options.speed,i)}else"hidden"==o.Status&&n();return o},show:function(t){return this._showNow(t),this},update:function(t){return this.content(t)},content:function(t){return"undefined"==typeof t?this.Content:(this._update(t),this)},reposition:function(){function e(){var e=$(t).scrollLeft();0>F-e&&(i=F-e,F=e),F+a-e>s&&(i=F-(s+e-a),F=s+e-a)}function o(e,o){r.offset.top-$(t).scrollTop()-p-z-12<0&&o.indexOf("top")>-1&&(q=e),r.offset.top+r.dimension.height+p+12+z>$(t).scrollTop()+$(t).height()&&o.indexOf("bottom")>-1&&(q=e,A=r.offset.top-p-z-12)}var n=this;if(0!==$("body").find(n.$tooltip).length){n.$tooltip.css("width",""),n.elProxyPosition=n._repositionInfo(n.$elProxy);var i=null,s=$(t).width(),r=n.elProxyPosition,a=n.$tooltip.outerWidth(!1),l=n.$tooltip.innerWidth()+1,p=n.$tooltip.outerHeight(!1);if(n.$elProxy.is("area")){var u=n.$elProxy.attr("shape"),d=n.$elProxy.parent().attr("name"),c=$('img[usemap="#'+d+'"]'),h=c.offset().left,f=c.offset().top,g=void 0!==n.$elProxy.attr("coords")?n.$elProxy.attr("coords").split(","):void 0;if("circle"==u){var m=parseInt(g[0]),v=parseInt(g[1]),y=parseInt(g[2]);r.dimension.height=2*y,r.dimension.width=2*y,r.offset.top=f+v-y,r.offset.left=h+m-y}else if("rect"==u){var m=parseInt(g[0]),v=parseInt(g[1]),w=parseInt(g[2]),b=parseInt(g[3]);r.dimension.height=b-v,r.dimension.width=w-m,r.offset.top=f+v,r.offset.left=h+m}else if("poly"==u){for(var C=[],O=[],x=0,S=0,_=0,I=0,k="even",P=0;P<g.length;P++){var T=parseInt(g[P]);"even"==k?(T>_&&(_=T,0===P&&(x=_)),x>T&&(x=T),k="odd"):(T>I&&(I=T,1==P&&(S=I)),S>T&&(S=T),k="even")}r.dimension.height=I-S,r.dimension.width=_-x,r.offset.top=f+S,r.offset.left=h+x}else r.dimension.height=c.outerHeight(!1),r.dimension.width=c.outerWidth(!1),r.offset.top=f,r.offset.left=h}var F=0,D=0,A=0,z=parseInt(n.options.offsetY),j=parseInt(n.options.offsetX),q=n.options.position;if("top"==q){var H=r.offset.left+a-(r.offset.left+r.dimension.width);F=r.offset.left+j-H/2,A=r.offset.top-p-z-12,e(),o("bottom","top")}if("top-left"==q&&(F=r.offset.left+j,A=r.offset.top-p-z-12,e(),o("bottom-left","top-left")),"top-right"==q&&(F=r.offset.left+r.dimension.width+j-a,A=r.offset.top-p-z-12,e(),o("bottom-right","top-right")),"bottom"==q){var H=r.offset.left+a-(r.offset.left+r.dimension.width);F=r.offset.left-H/2+j,A=r.offset.top+r.dimension.height+z+12,e(),o("top","bottom")}if("bottom-left"==q&&(F=r.offset.left+j,A=r.offset.top+r.dimension.height+z+12,e(),o("top-left","bottom-left")),"bottom-right"==q&&(F=r.offset.left+r.dimension.width+j-a,A=r.offset.top+r.dimension.height+z+12,e(),o("top-right","bottom-right")),"left"==q){F=r.offset.left-j-a-12,D=r.offset.left+j+r.dimension.width+12;var E=r.offset.top+p-(r.offset.top+r.dimension.height);if(A=r.offset.top-E/2-z,0>F&&D+a>s){var N=2*parseFloat(n.$tooltip.css("border-width")),L=a+F-N;n.$tooltip.css("width",L+"px"),p=n.$tooltip.outerHeight(!1),F=r.offset.left-j-L-12-N,E=r.offset.top+p-(r.offset.top+r.dimension.height),A=r.offset.top-E/2-z}else 0>F&&(F=r.offset.left+j+r.dimension.width+12,i="left")}if("right"==q){F=r.offset.left+j+r.dimension.width+12,D=r.offset.left-j-a-12;var E=r.offset.top+p-(r.offset.top+r.dimension.height);if(A=r.offset.top-E/2-z,F+a>s&&0>D){var N=2*parseFloat(n.$tooltip.css("border-width")),L=s-F-N;n.$tooltip.css("width",L+"px"),p=n.$tooltip.outerHeight(!1),E=r.offset.top+p-(r.offset.top+r.dimension.height),A=r.offset.top-E/2-z}else F+a>s&&(F=r.offset.left-j-a-12,i="right")}if(n.options.arrow){var M="tooltipster-arrow-"+q;if(n.options.arrowColor.length<1)var V=n.$tooltip.css("background-color");else var V=n.options.arrowColor;if(i?"left"==i?(M="tooltipster-arrow-right",i=""):"right"==i?(M="tooltipster-arrow-left",i=""):i="left:"+Math.round(i)+"px;":i="","top"==q||"top-left"==q||"top-right"==q)var K=parseFloat(n.$tooltip.css("border-bottom-width")),R=n.$tooltip.css("border-bottom-color");else if("bottom"==q||"bottom-left"==q||"bottom-right"==q)var K=parseFloat(n.$tooltip.css("border-top-width")),R=n.$tooltip.css("border-top-color");else if("left"==q)var K=parseFloat(n.$tooltip.css("border-right-width")),R=n.$tooltip.css("border-right-color");else if("right"==q)var K=parseFloat(n.$tooltip.css("border-left-width")),R=n.$tooltip.css("border-left-color");else var K=parseFloat(n.$tooltip.css("border-bottom-width")),R=n.$tooltip.css("border-bottom-color");K>1&&K++;var W="";if(0!==K){var Q="",B="border-color: "+R+";";-1!==M.indexOf("bottom")?Q="margin-top: -"+Math.round(K)+"px;":-1!==M.indexOf("top")?Q="margin-bottom: -"+Math.round(K)+"px;":-1!==M.indexOf("left")?Q="margin-right: -"+Math.round(K)+"px;":-1!==M.indexOf("right")&&(Q="margin-left: -"+Math.round(K)+"px;"),W='<span class="tooltipster-arrow-border" style="'+Q+" "+B+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var U='<div class="'+M+' tooltipster-arrow" style="'+i+'">'+W+'<span style="border-color:'+V+';"></span></div>';n.$tooltip.append(U)}n.$tooltip.css({top:Math.round(A)+"px",left:Math.round(F)+"px"})}return n},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var e=t.$el.data("tooltipster-ns");if(1===e.length){var o=null;"previous"===t.options.restoration?o=t.$el.data("tooltipster-initialTitle"):"current"===t.options.restoration&&(o="string"==typeof t.Content?t.Content:$("<div></div>").append(t.Content).html()),o&&t.$el.attr("title",o),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else e=$.grep(e,function(e,o){return e!==t.namespace}),t.$el.data("tooltipster-ns",e);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(t,e){return"undefined"==typeof e?this.options[t]:(this.options[t]=e,this)},status:function(){return this.Status}},$.fn[r]=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var e=!0;switch(t[0]){case"setDefaults":$.extend(a,t[1]);break;default:e=!1}return e?!0:this}return this}if("string"==typeof t[0]){var n="#*$~&";return this.each(function(){var e=$(this).data("tooltipster-ns"),o=e?$(this).data(e[0]):null;if(!o)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof o[t[0]])throw new Error('Unknown method .tooltipster("'+t[0]+'")');var i=o[t[0]](t[1],t[2]);return i!==o?(n=i,!1):void 0}),"#*$~&"!==n?n:this}var i=[],s=t[0]&&"undefined"!=typeof t[0].multiple,r=s&&t[0].multiple||!s&&a.multiple,l=t[0]&&"undefined"!=typeof t[0].debug,p=l&&t[0].debug||!l&&a.debug;return this.each(function(){var e=!1,n=$(this).data("tooltipster-ns"),s=null;n?r?e=!0:p&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):e=!0,e&&(s=new o(this,t[0]),n||(n=[]),n.push(s.namespace),$(this).data("tooltipster-ns",n),$(this).data(s.namespace,s)),i.push(s)}),r?i:this};var l=!!("ontouchstart"in t),p=!1;$("body").one("mousemove",function(){p=!0})}(jQuery,window,document),$(function(){0!=="#login".length&&(0===$("#username").val().length?$("#username").focus():$("#password").focus(),$("#username, #password").on("input",function(t){$("#login .input .status").remove()})),$("#login form").submit(function(t){var e=$("#login form"),o=e.serialize();$(":input",e).prop("disabled",!0),$("#submit",e).addClass("loading"),$.ajax({url:"/login",type:"POST",data:o,dataType:"json",success:function(t){"success"===t.status?(0!==$(".message",e).length&&($(".message",e).slideUp(600),$(".input .status",e).remove()),$(".input",e).append('<i class="status good"></i>'),$("#submit span",e).html('<i class="icon-check"></i>'),setTimeout(function(){window.location.href="/dashboard"},1500)):"redirect"===t.status?window.location.href=t.target:($("#login").animateCss("shake"),$(".input",e).append('<i class="status bad"></i>'),0===$(".message",e).length?($(e).prepend('<div class="message error">'+t.error+"</div>"),$(".message",e).animateCss("bounceIn")):$(".message",e).html(t.error).removeClass("success").addClass("error"),$(":input",e).prop("disabled",!1),0===$("#username",e).val().length?$("#username",e).focus():$("#password",e).focus()),$("#submit",e).removeClass("loading")}}),t.preventDefault()}),$.fn.extend({animateCss:function(t){var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(this).addClass("animated "+t).one(e,function(){$(this).removeClass("animated "+t)})}})});